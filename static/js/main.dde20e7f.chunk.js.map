{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["INIT_TIME","App","state","addPlayerEntry","paused","initTime","getTimeFn","pointEntry","showConfirm","timerFunctionsSet","turnCounter","playerPoints","handleChange","e","setState","target","name","value","addPlayer","preventDefault","newPlayer","toggleConfirm","prevState","linearScoreFactor","timeSpent","saveGame","localStorage","setItem","JSON","stringify","loadGame","playerPointsStr","getItem","turnCounterStr","parse","Number","clearPoints","currentPlayer","playerIndex","Object","keys","length","pauseFn","resetFn","isNaN","alert","player","newPlayerPoints","newPoint","Math","round","padn","timerObj","unit","n","_owner","memoizedState","componentDidMount","setFunctions","startFn","this","className","action","onSubmit","type","id","onChange","placeholder","initialTime","timeToUpdate","direction","startImmediately","lastUnit","checkpoints","time","callback","onStart","onPause","onReset","start","pause","reset","getTime","Fragment","Minutes","Seconds","onClick","map","reduce","s","x","reverse","i","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dde20e7f.chunk.js","sourcesContent":["import './App.css';\nimport React, { Component } from 'react'\nimport Timer from 'react-compound-timer'\n\nconst INIT_TIME = 5*60*1000\n\nexport class App extends Component {\n\n  state = {\n    addPlayerEntry: '',\n    paused: true,\n    initTime: INIT_TIME,\n    getTimeFn: () => INIT_TIME,\n    pointEntry: '',\n    showConfirm: false,\n    timerFunctionsSet: false,\n    turnCounter: 0,\n    playerPoints: {}\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value })\n  }\n\n  addPlayer = (e) => {\n    e.preventDefault()\n    const { addPlayerEntry, playerPoints } = this.state\n    const newPlayer = { [addPlayerEntry]: [] }\n    this.setState({ playerPoints: {...playerPoints, ...newPlayer } })\n  }\n\n  toggleConfirm = () => {\n      this.setState(prevState => ({ showConfirm: !prevState.showConfirm }))\n  }\n\n  linearScoreFactor = () => {\n    const timeSpent = INIT_TIME - this.state.getTimeFn()\n    return 1 - (1 / INIT_TIME) * timeSpent\n  }\n\n  saveGame = () => {\n    const { playerPoints, turnCounter } = this.state\n    localStorage.setItem('playerPoints', JSON.stringify(playerPoints))\n    localStorage.setItem('turnCounter', turnCounter)\n  }\n\n  loadGame = () => {\n    const playerPointsStr = localStorage.getItem('playerPoints')\n    const turnCounterStr = localStorage.getItem('turnCounter')    \n    const playerPoints = playerPointsStr !== null ? JSON.parse(playerPointsStr) : {}\n    const turnCounter = Number(turnCounterStr) || 0\n    this.setState({\n      playerPoints,\n      turnCounter,\n    })\n  }\n\n  clearPoints = () => {\n    this.setState({\n      playerPoints: {},\n      turnCounter: 0,\n      showConfirm: false,\n    })\n  }\n\n  currentPlayer = () => {\n    const { playerPoints, turnCounter } = this.state\n    const playerIndex = turnCounter % Object.keys(playerPoints).length\n    return Object.keys(playerPoints)[playerIndex]\n  }\n\n  pointEntry = (e) => {\n    e.preventDefault()\n    const { playerPoints, turnCounter, pointEntry, pauseFn, resetFn, getTimeFn } = this.state\n    if (isNaN(pointEntry)) {\n      return alert('Point entry must be a number')\n    }\n    if (Object.keys(playerPoints).length === 0) {\n      return alert('Add a player to play the game')\n    }\n    if (getTimeFn() === INIT_TIME) {\n      return alert('Start the timer')\n    }\n    const player = this.currentPlayer()\n    const newPlayerPoints = {...playerPoints}\n    const newPoint = Math.round(this.linearScoreFactor() * Number(pointEntry))\n    newPlayerPoints[player] = [...playerPoints[player], newPoint]\n    this.setState({\n      playerPoints: newPlayerPoints,\n      turnCounter: turnCounter + 1,\n      pointEntry: '',\n    }, () => {\n      this.saveGame()\n      pauseFn()\n      resetFn()\n    })\n  }\n\n  padn = (timerObj, unit) => {\n    const n = timerObj._owner.memoizedState[unit]\n    return (n < 10) ? ('0' + n) : n\n  }\n\n  componentDidMount = () => {\n    this.loadGame()\n  }\n\n  // TODO do this without hacks\n  setFunctions = (startFn, pauseFn, resetFn, getTimeFn) => {\n    if (!this.state.timerFunctionsSet) {\n      this.setState({\n        startFn,\n        pauseFn,\n        resetFn,\n        getTimeFn,\n        timerFunctionsSet: true,\n      })\n    }\n  }\n\n  render() {\n    const {\n      addPlayerEntry, paused, initTime, pointEntry, playerPoints, showConfirm\n    } = this.state\n    return (\n      <div className='app'>\n\n        <div className='add-player-form-cont'>\n          <form action='' onSubmit={this.addPlayer} className='add-player-form'>\n            <input\n              type=\"text\"\n              id='addPlayerEntry'\n              name='addPlayerEntry'\n              value={addPlayerEntry}\n              onChange={this.handleChange}\n              placeholder='Player'\n            />\n            <input type=\"submit\" value='Add player' />\n          </form>\n        </div>\n\n        <Timer\n            initialTime={initTime}\n            timeToUpdate={200}\n            direction=\"backward\"\n            startImmediately={false}\n            lastUnit='m'\n            checkpoints={[\n                {\n                    time: 0,\n                    callback: () => alert('countdown finished'),\n                },\n            ]}\n            onStart = {() => {\n              this.setState({ paused: false })\n            }}\n            onPause = {() => {\n              this.setState({ paused: true })\n            }}\n            onReset = {() => {\n              this.setState({ paused: true })\n            }}\n        >\n            {({ start, pause, reset, getTime }) => {\n              this.setFunctions(start, pause, reset, getTime)\n              return (\n                <React.Fragment>\n                    <div className='time'>\n                      {this.padn(<Timer.Minutes />, 'm')}:\n                      {this.padn(<Timer.Seconds />, 's')}\n                    </div>\n                    <div className='buttons'>\n                      {paused ? (\n                        <div className='start-btn-cont'>\n                          <button onClick={start}>Start</button>\n                        </div>\n                      ) : (\n                        <div className='pause-btn-cont'>\n                          <button onClick={() => {\n                            pause()\n                            this.setState({ time: getTime() })\n                          }}>Pause</button>\n                        </div>\n                      )}\n                    <div className='reset-btn-cont'>\n                      <button onClick={() => {\n                          pause()\n                          this.setState({ time: initTime })\n                          reset()\n                        }}>Reset</button>\n                    </div>\n                  </div>\n                </React.Fragment>\n            )}}\n        </Timer>\n\n        <div className='entry-points-form-cont'>\n          <form action='' onSubmit={this.pointEntry} className='entry-points-form'>\n            <input\n              type=\"text\"\n              id='pointEntry'\n              name='pointEntry'\n              value={pointEntry}\n              onChange={this.handleChange}\n              placeholder='Points'\n            />\n            <input type=\"submit\" value='Submit' />\n          </form>\n        </div>\n\n        <div className='turn-cont'>\n          {this.currentPlayer()}'s turn\n        </div>\n\n        <div className='score-cont'>\n          {Object.keys(playerPoints).map(player => (\n            <div className='player-score-cont' key={player}>\n              <div className='player-name'>\n                {player}\n              </div>\n              <div className='player-total-cont'>\n                {playerPoints[player].reduce((s, x) => s+x, 0)}\n              </div>\n              <div className='player-point-cont'>\n                {playerPoints[player].reverse().map((n, i) => (\n                  <div className='point' key={`point-${player}-${i}`}>\n                    {n}\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className='new-game-cont'>\n          {showConfirm ? (\n          <div className='confirm-buttons'>\n            <button onClick={this.toggleConfirm}>No</button>\n            <button onClick={this.clearPoints}>Yes</button>\n          </div>\n          )\n          :\n          ((<button onClick={this.toggleConfirm}>\n            New Game\n          </button>))}\n        </div>\n\n      </div>\n    )\n  }\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}